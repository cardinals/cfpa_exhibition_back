<!DOCTYPE HTML>
<html manifest="cache.appcache">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, user-scalable=yes">
	<link rel="icon" href="img/icon/w1_03.png">
	<link rel="stylesheet" href="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css" />
	<link href="http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.css" rel="stylesheet" type="text/css" />
	<link href="css/viewer.min.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="css/toolbar.css">
	<link rel="stylesheet" href="css/catalog.css">
	<link rel="stylesheet" href="css/dialog.css">
	<link rel="stylesheet" href="css/viewer.min.css">
	<link rel="stylesheet" href="css/project.css">
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=CB5ed14602e39f49caf37615bf16c603"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.js"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/GeoUtils/1.2/src/GeoUtils_min.js"></script>

	<script type="text/javascript" src="js/viewer.min.js"></script>
	<title>数字化预案管理平台</title>
</head>
<style>
	* {
		padding: 0px;
		margin: 0px;
		font-family: "微软雅黑";
	}

	.main {
		padding: 0px;
		margin: 0px;
		height: 100%;
		width: 100%;
	}

	.spi {
		padding: 0px;
		margin: 0px;
		position: absolute;
		width: 100%;
		height: 100%;
		z-index: 3;
	}

	.left {
		position: absolute;
		width: 400px;
		height: 100%;
		z-index: 100;
		background: #EBEDEF;
		box-shadow: 0px 0px 10px 5px #aaa;
	}

	.left>p {
		text-align: center;
		padding: 10px;
		font-weight: bold;
	}

	.tabs {
		position: absolute;
		width: 380px;
		float: left;
		font-size: 13px;
		margin-left: 10px;
	}

	.tabs ul {
		position: relative;
		list-style: none outside none;
		margin: ;
		padding: ;
		font-size: 13px;
	}

	.tabs ul li {
		float: left;
		line-height: 24px;
		margin: ;
		font-weight: bold;
		padding: 10px;
		font-size: 13px;
	}

	.tab-nav {
		cursor: pointer;
		width: 76px;
		font-size: 13px;
	}

	.tab-nav:hover {
		cursor: pointer;
		width: 76px;
		height: 46px;
		font-size: 13px;
		background: rgba(256, 256, 256, 0.5);
	}

	.tab-nav-action {
		color: #3366CC;
		border-top: 3px solid #3366CC;
		cursor: pointer;
		background-color: white;
		width: 76px;
		font-size: 13px;
	}

	.tabs-body {
		float: left;
		padding: 5px;
		width: %;
	}

	.tab_line {
		height: 30px;
		margin-top: -3px;
		position: relative;
		top: 1px;
		width: 819px;
		z-index: ;
	}

	.bk {
		margin: 0px;
		padding: 0px;
		background: rgba(0, 0, 0, 0.5);
		width: 100%;
		height: 100%;
	}

	.z-main {
		width: 100%;
		position: fixed;
		top: 49px;
		bottom: 0.5px;
		overflow: auto;
		background: rgba(51, 51, 51, 0.7);
	}

	.j-main {
		position: relative;
		margin-left: 80px;
		top: 50px;
		bottom: 0.5px;
		overflow: hidden;
	}

	.exitlf {
		margin: 10px;
		position: absolute;
		right: 10px;
		cursor: pointer;
	}

	.exit {
		position: absolute;
		right: 20px;
		cursor: pointer;
	}

	.tabs-body {
		margin-top: 46px;
		margin-left: 10px;
		width: 380px;
		height: 80%;
		background: #FFFFFF;
		overflow-y: auto;
		overflow-x: hidden;
	}

	.liy {
		padding: 10px;
		height: 48px;
		background: #F5F5F5;
	}

	.liz {
		padding: 10px;
		height: 48px;
		background: #FFFFFF;
	}

	h4 {
		font-size: 14px;
	}

	.zzbs>ul>li>p {
		padding-top: 1px;
		font-size: 14px;
		color: #999;
		font-weight: 700;
	}

	.zzbs>ul>li:hover {
		background: lightcyan;
	}
</style>
<style>
	.title {
		margin-top: 10px;
	}

	.item {
		height: 48px;
		padding: 10px;
		background-color: #0066CC;
		color: #FFFFFF;
	}

	.content>li {
		height: 48px;
	}

	.item2 {
		font-size: 15px;
		font-weight: 700;
	}

	.logina {
		font-size: 14px;
		color: #333333;
		letter-spacing: 1px;
	}
</style>
<style type="text/css">
	table.dataintable {
		margin-top: 8px;
		border-collapse: collapse;
		width: 100%;
	}

	table.dataintable th {
		padding: 5px 15px 5px 6px;
		background-color: #0066CC;
		color: #FFFFFF;
	}

	table.dataintable td {
		border: 1px solid #EAEAEA;
	}

	.dataintable tr>td>li {
		padding: 6px 15px 6px 6px;
		font-weight: 900;
		color: red;
	}

	table.dataintable tr:nth-child(odd) {
	}

	table.dataintable tr:nth-child(even) {
		background-color: #fff;
	}

	.lna {
		color: #333333;
		font-size: 13px;
		padding-left: 5px;
		padding-right: 5px;
		height: 40px;
		text-align: right;
		width: 35%;
		font-weight: 900;
		background-color: #F5F5F5;
		border: 1px solid #EAEAEA;
	}

	.lnb {
		color: #333333;
		width: 120px;
		height: 40px;
		font-weight: 500;
		background-color: #fff;
		border: 1px solid #EAEAEA;
		padding-left: 10px;
		font-size: 13px;
	}

	.lnna {
		color: #333333;
		font-size: 13px;
		padding-left: 5px;
		padding-right: 5px;
		height: 40px;
		text-align: right;
		width: 30%;
		font-weight: 900;
		background-color: #F5F5F5;
		border: 1px solid #EAEAEA;
	.lnnb {
		padding-left: 20px;
		color: #333333;
		width: 120px;
		height: 40px;
		font-weight: 500;
		background-color: #fff;
		border: 1px solid #EAEAEA;
		font-size: 13px;
	}
	.lnnna {
		color: #333333;
		font-size: 13px;
		padding-left: 5px;
		padding-right: 5px;
		height: 40px;
		text-align: right;
		width: 30%;
		font-weight: 900;
		background-color: #F5F5F5;
		border: 1px solid #EAEAEA;
	}
</style>
<body>
<!--model2-->
<div class="main">
	<span id="allmap" class="spi"></span>
</div>
<div class="left" id="lft" style="display: none;z-index: 100;">
	<span class="exitlf"><img src="img/icon/arrow-left.png"/></span>
	<p class="logina" id="dwmc"></p>
	<div class="tabs">
		<ul id="tabs">
			<li class="tab-nav-action">基本情况</li>
			<li class="tab-nav">建筑信息</li>
			<li class="tab-nav">消防设施</li>
			<li class="tab-nav">重点部位</li>
			<li class="tab-nav">作战部署</li>
		</ul>
	</div>
	<div id="tabs-body" class="tabs-body">
		<div style="display: block">
			<table class="dataintable">
				<tr style='height:40px;'>
					<td class="lna">预案编号:</td>
					<td class="lnb" id="yabm"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">单位名称:</td>
					<td class="lnb" id="dxmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">单位性质:</td>
					<td class="lnb" id="dwxzmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">预案级别:</td>
					<td class="lnb" id="yajbmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">防火级别:</td>
					<td class="lnb" id="fhdjmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">防火管辖大队:</td>
					<td class="lnb" id="fhdzidmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">灭火责任队站:</td>
					<td class="lnb" id="mhdzidmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">审核/更新时间:</td>
					<td class="lnb" id="xgsj"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">制作人:</td>
					<td class="lnb" id="zzrmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">审核人:</td>
					<td class="lnb" id="shrmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">单位地址:</td>
					<td class="lnb" id="dwdz"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">经纬度:</td>
					<td class="lnb" id="gisX"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">建筑信息分类:</td>
					<td class="lnb" id="jzflmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">值班电话:</td>
					<td class="lnb" id="zbdh"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">消防责任人:</td>
					<td class="lnb" id="xfzrr"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">消防管理人:</td>
					<td class="lnb" id="xfglr"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">总建筑面积:</td>
					<td class="lnb" id="jzmj"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lna">总占地面积:</td>
					<td class="lnb" id="zdmj"></td>
				</tr>
			</table>
			<table id="yaxxb" class="dataintable">
				<tr>
					<th colspan="2" style="text-align: center;border: 1px solid #EAEAEA;">单位消防力量</th>

				<tr style='height:40px;'>
					<td class="lnna">队伍类型:</td>
					<td class="lnb" id="xfdwlxmc"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lnna">人数:</td>
					<td class="lnnb" id="rs"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lnna">联系方式:</td>
					<td class="lnb" id="zbdhz"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lnna">车辆数:</td>
					<td class="lnb" id="cls"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lnna">备注:</td>
					<td class="lnb" id="bz"></td>
				</tr>
				</tr>
			</table>
			<table id="yaxxc" class="dataintable">
				<tr>
					<th colspan="2" style="text-align: center;border: 1px solid #EAEAEA;">毗邻情况</th>
				<tr style='height:40px;'>
					<td class="lnna" style="width:15%;">东:</td>
					<td class="lnb" id="plqkd"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lnna" style="width:15%;">西:</td>
					<td class="lnb" id="plqkx"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lnna" style="width:15%;">南:</td>
					<td class="lnb" id="plqkn"></td>
				</tr>
				<tr style='height:40px;'>
					<td class="lnna" style="width:15%;">北:</td>
					<td class="lnb" id="plqkb"></td>
				</tr>

				</tr>
			</table>
			<table id="yaxxd" class="dataintable">
				<tr>
					<th colspan="2" style="text-align: center;border: 1px solid #EAEAEA;">单位概况</th>
				</tr>
				<tr>
					<td id="dwgk" colspan="2" style="padding:10px;font-weight: 100;"></td>
				</tr>
			</table>
			<table class="dataintable">
				<tr>
					<th colspan="2" style="text-align: center;border: 1px solid #EAEAEA;">备注</th>
				</tr>
				<tr>
					<td colspan="2" style="font-weight:700 ;height: 40px;"></td>
				</tr>
			</table>
		</div>
		<div class="zzbs" style="display: none;">
			<ul id="jzmc">

			</ul>
		</div>
		<div style="display: none">
			<ul class="menu">
				<li class="title" id="dtjza">
				</li>
			</ul>
		</div>
		<div class="zzbs" style="display: none">
			<ul id="zdbwmc">
			</ul>
		</div>
		<div class="zzbs" style="display: none">
			<ul id="zqbwb">

			</ul>
		</div>
	</div>
</div>
<!-- 附图 -->
<div style="display: none;z-index: 777;" id="photos" class="content-block block-level-1 bk" data-menu-text="附图">
	<h2 class="block-header">
		<span class="header-title-inner">关键图示</span>
		<span class="exit"><i class="fa fa-close" style="color: #FFFFFF;">退出</i></span>
	</h2>
	<div class="z-main">
		<div class="j-main" id="images">
		</div>
	</div>
</div>

</body>
<script type="text/javascript" src="shuju.json"></script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/catalog.js" ></script>
<script type="text/javascript" src="js/screenfull.min.js" ></script>
<script type="text/javascript" src="js/toolbar.js" ></script>
<script>
    $("#imgbtn").click(function() {
        $("#dailog").show();
    })
    $("#yaexit").click(function() {
        $("#dailog").hide();
    })
</script>
<script>
    $(function() {
        var images = [];
        for(var z = 0; z < data.pictureList.length; z++) {
            images = "<div class='sub-block'><div class='sub-block-body' style='text-align:center'><h3 class='sub-block-header'><span class='header-title-inner'>"+data.pictureList[z].wjm+"</span></h3><img class='photo-tag' data-photo-id='21' src='"+data.serverUrl+""+data.pictureList[z].yllj+"' alt='"+data.pictureList[z].wjm+"'></div></div>";
            $("#images").append(images);
        }
    })
</script>
<script>
    $(function() {
        var dxmc = "";
        var yabm = "";
        var dwmc = "";
        var dwxzmc = "";
        var yajbmc = "";
        var fhdjmc = "";
        var dzmc = [];
        var dzmczd = "";
        var xgsj = [];
        var zzrmc = "";
        var shrmc = "";
        var dwdz = "";
        var gisX = "";
        var jzflmc = "";
        var zbdh = "";
        var xfzrr = "";
        var xfglr = "";
        var jzmj = "";
        var zdmj = "";
        //单位消防力量
        var xfdwlxmc = "";
        var zbdhz = "";
        //毗邻情况
        var plqkd = "";
        var plqkx = "";
        var plqkn = "";
        var plqkb = "";
        //建筑信息
        var jzmc = [];
        var jzmcb = [];
        //单位概况
        var dwgk = "";
        //消防设施
        var wz = [];
        var wzb = [];
        var wzc = [];
        var wzd = [];
        var wze = [];
        var wzf = [];
        var wzg = [];
        var wzh = [];
        var wzi = [];
        var wzj = [];
        var wzk = [];
        var wzl = [];
        var wzm = [];
        var wzn = [];
        var wzo = [];
        var wzp = [];
        var wzq = [];
        var wzr = [];
        var dtjza = "";
        var dtjzb = "";
        //灾情信息
        var zqbw = [];
        var zqbwb = [];
        var zqbwc = [];
        var zqbwd = [];
        //重点部位
        var zdbwmc = [];
        var zdbwmb = [];
        var zdbwwz = [];
        var zdbwwzb = [];
        dwgk = (data.compZddwInfo.dwgk != "" ? data.compZddwInfo.dwgk : "无");
        $("#dwgk").append(dwgk);
        dxmc = (data.compPlanInfo.dxmc != "" ? data.compPlanInfo.dxmc : "无");
        $("#dxmc").append(dxmc);
        yabm = (data.compPlanInfo.yabm != "" ? data.compPlanInfo.yabm : "无");
        $("#yabm").append(yabm);
        dwmc = (data.compZddwInfo.dwmc != "" ? data.compZddwInfo.dwmc : "无");
        $("#dwmc").append(dwmc);
        dwxzmc = (data.compZddwInfo.dwxzmc != "" ? data.compZddwInfo.dwxzmc : "无");
        $("#dwxzmc").append(dwxzmc);
        yajbmc = (data.compPlanInfo.yajbmc != "" ? data.compPlanInfo.yajbmc : "无");
        $("#yajbmc").append(yajbmc);
        fhdjmc = (data.compZddwInfo.fhdjmc != "" ? data.compZddwInfo.fhdjmc : "无");
        $("#fhdjmc").append(fhdjmc);
        //数据//防火
        fhdzidmc = (data.compZddwInfo.fhdzidmc != "" ? data.compZddwInfo.fhdzidmc : "无");
        $("#fhdzidmc").append(fhdzidmc);
        //灭火
        mhdzidmc = (data.compZddwInfo.mhdzidmc != "" ? data.compZddwInfo.mhdzidmc : "无");
        $("#mhdzidmc").append(mhdzidmc);
        xgsj = (data.compZddwInfo.xgsj != "" ? data.compZddwInfo.xgsj : "无");
        $("#xgsj").append(xgsj);
        //备注
        bz = (data.compZddwInfo.bz != "" ? data.compZddwInfo.bz : "无");
        $("#bz").append(bz);
        zzrmc = (data.compPlanInfo.zzrmc != "" ? data.compPlanInfo.zzrmc : "无");
        $("#zzrmc").append(zzrmc);
        shrmc = (data.compPlanInfo.shrmc != "" ? data.compPlanInfo.shrmc : "无");
        $("#shrmc").append(shrmc);
        dwdz = (data.compZddwInfo.dwdz != "" ? data.compZddwInfo.dwdz : "无");
        $("#dwdz").append(dwdz);
        jzflmc = (data.compZddwInfo.jzflmc != "" ? data.compZddwInfo.jzflmc : "无");
        $("#jzflmc").append(jzflmc);
        zbdh = (data.compZddwInfo.zbdh != "" ? data.compZddwInfo.zbdh : "无");
        $("#zbdh").append(zbdh);
        xfzrr = (data.compZddwInfo.xfzrr != "" ? data.compZddwInfo.xfzrr : "无") + "<br>" + data.compZddwInfo.xfzrrdh;
        $("#xfzrr").append(xfzrr);
        xfglr = (data.compZddwInfo.xfglr != "" ? data.compZddwInfo.xfglr : "无") + "<br>" + data.compZddwInfo.xfglrdh;
        $("#xfglr").append(xfglr);
        jzmj = (data.compZddwInfo.jzmj != "" ? data.compZddwInfo.jzmj : "无") + " ㎡";
        $("#jzmj").append(jzmj);
        zdmj = (data.compZddwInfo.zdmj != "" ? data.compZddwInfo.zdmj : "无") + " ㎡";
        $("#zdmj").append(zdmj);

        rs = (data.compZddwInfo.rs != "" ? data.compZddwInfo.rs : "无");
        $("#rs").append(rs);

        cls = (data.compZddwInfo.cls != "" ? data.compZddwInfo.cls : "无");
        $("#cls").append(cls);

        //单位消防力量
        xfdwlxmc = (data.compZddwInfo.xfdwlxmc != "" ? data.compZddwInfo.xfdwlxmc : "无");
        $("#xfdwlxmc").append(xfdwlxmc);
        zbdhz = (data.compZddwInfo.zbdh != "" ? data.compZddwInfo.zbdh : "无");
        $("#zbdhz").append(zbdhz);
        //毗邻情况

        plqkd = (data.compZddwInfo.plqkd != "" ? data.compZddwInfo.plqkd : "无");
        $("#plqkd").append(plqkd);
        plqkx =  (data.compZddwInfo.plqkx != "" ? data.compZddwInfo.plqkx : "无");
        $("#plqkx").append(plqkx);
        plqkn =  (data.compZddwInfo.plqkn != "" ? data.compZddwInfo.plqkn : "无");
        $("#plqkn").append(plqkn);
        plqkb = (data.compZddwInfo.plqkb != "" ? data.compZddwInfo.plqkb : "无");
        $("#plqkb").append(plqkb);

        //建筑信息
        for(var z = 0; z < data.areaBuildingList.length; z++) {
            jzmc = " <li style='padding:10px;'><p>单体建筑</p><h4>" + data.areaBuildingList[z].jzmc + "</h4></li>";
            $("#jzmc").append(jzmc);
        }
        //消防设施
//      for(var i = 0; i < data.areaBuildingList.length; i++) {
//      	var wza="";
//      	var wzb="";
//      	var wzc="";
//      	var wzd="";
//      	var wze="";
//      	for(var j=0;j<data.areaBuildingList.length;j++ ){
//
//      		wza += "<li class='liz'><p class='item2' target='right'>"+
//      			data.areaBuildingList[i].firefacilites[1001][j].wz
//      		      +"</p></li>";
//      	};
//      	for(var r=0;r<data.areaBuildingList.length;r++ ){
//      		wzb += "<li class='liz'><p class='item2' target='right'>"+
//      			data.areaBuildingList[i].firefacilites[1002][r].wz
//      		      +"</p></li>";
//      	};
//      	for(var p=0;p<1;p++ ){
//      		wzd += "<li class='liz'><p class='item2' target='right'>"+
//      			data.areaBuildingList[i].firefacilites[1003][p].wz
//      		      +"</p></li>";
//      	};
//      	for(var k=0;k<1;k++ ){
//      		wze += "<li class='liz'><p class='item2' target='right'>"+
//      			data.areaBuildingList[i].firefacilites[2001][k].wz
//      		      +"</p></li>";
//      	};
//      	for(var s=0;s<data.areaBuildingList.length;s++ ){
//      		wzc += "<li class='liz'><p class='item2' target='right'>"+
//      			data.areaBuildingList[i].firefacilites[2004][s].wz
//      		      +"</p></li>";
//      	};
//
//          dtjza = "<h4 class='item item1'>单体建筑-<span>"+data.areaBuildingList[i].jzmc+"</span><span style='float:right; margin: 5px;font-size: 10px;'></span></h4>"
//           +"<ul class='content' style='overflow-y:auto;overflow-x:hidden;'>"+
//              wza+wzb+wze+wzd+wzc+"</ul>";
//          $("#dtjza").append(dtjza);
//      }

        //重点部位
        for(var m=0;m<data.jzlpartsList.length; m++){
            zdbwmc = "<li style='padding:10px;'><h4>"+data.jzlpartsList[m].zdbwmc+"</h4><p>"+data.jzlpartsList[m].zdbwwz+"</p></li>";
            $("#zdbwmc").append(zdbwmc);
        }

        //灾情信息 disastersetList
        for(var  n = 0; n < data.disastersetList.length; n++) {
            zqbwb = "<li style='padding:10px;'><h4>灾情" + [n + 1] + "</h4><p>灾情位置:<span>" + data.disastersetList[n].zqbw + "</span></p></li>";
            $("#zqbwb").append(zqbwb);
        }

    });
</script>
<script src="js/toolbar.js"></script>
<script src="js/catalog.js"></script>
<script src="js/screenfull.min.js"></script>
<script type="text/javascript">
    var viewportSize = {
        width: $(window).width(),
        height: $(window).height()
    }
    $(function() {

        $('#photos').each(function(index, item) {
            new Viewer(item);
        });


        $(window).resize(function() {
            viewportResize();
        });
        viewportResize();

    });

    function exportDoc() {

        window.open(docUrl);
    }

    function viewportResize() {
        viewportSize['width'] = $(window).width();
        viewportSize['height'] = $(window).height();

    }

    function openPhoto(photoId) {
        var images = document.querySelectorAll('.photo-tag');
        for(let i = 0; i < images.length - 1; i++) {
            var element = images[i];
            if(element.dataset.photoId == photoId) {
                element.click();
                break;
            }
        }
    }
</script>
<script>
    $(".title .item1").click(function() {
        $(this).next(".content").slideToggle(); //实现二级菜单的展开收缩功能
        $(this).find("span").toggleClass("glyphicon glyphicon-chevron-down"); //实现菜单点击时图标的转换效果
        $(this).find("span").toggleClass("glyphicon glyphicon-chevron-right");
    })
</script>
<script>
    function opents() {
        document.getElementById("photos").style.display = 'block';
    }

    function openleft() {
        document.getElementById("lft").style.display = 'block';
    }
    $('.exit').click(function() {
        document.getElementById("photos").style.display = 'none';
    })
    $('.exitlf').click(function() {
        document.getElementById("lft").style.display = 'none';
    })
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#tabs").qmTabs();
    });
</script>
<script>
    (function($) {
        $.fn.extend({
            qmTabs: function() {
                var aTabBodys = $('#tabs-body > div');
                $(this).children("li").each(function(index) {
                    $(this).click(function() {
                        //alert(index);
                        $(this).removeClass().addClass('tab-nav-action').siblings().removeClass().addClass('tab-nav');
                        aTabBodys.hide().eq(index).show();
                    });
                });
            }
        });
    })(jQuery);
</script>
<script type="text/javascript">
    $(function() {

        PI = 3.14159265358979324;
        x_pi = 3.14159265358979324 * 3000.0 / 180.0;
        // 百度地图API功能
        var map = new BMap.Map("allmap", {
            enableMapClick: false
        });
        gisX = data.compZddwInfo.gisX;
        gisY = data.compZddwInfo.gisY;
        var gispt = new BMap.Point(gisX, gisY);
        var middle = wgs84_bd09(gispt);
        var pt = new BMap.Point(middle.lng, middle.lat);
        gisXY = middle.lng + ','+'<br>' + middle.lat;
        $("#gisX").append(gisXY);
        map.centerAndZoom(pt, 17);
        map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
        //创建图标
        map.clearOverlays();
        enableMapClick: false;
        var myIcon = new BMap.Icon("img/icon/w1_03.png", new BMap.Size(26, 26));
        var marker = new BMap.Marker(pt, {
            icon: myIcon
        }); // 创建标注
        map.addOverlay(marker);
        marker.addEventListener("click", function() {
            gisX = data.compZddwInfo.gisX;
            gisY = data.compZddwInfo.gisY;
            var middle = wgs84_bd09(gispt);
            var pt = new BMap.Point(middle.lng, middle.lat);
            var myIcon2 = new BMap.Icon("img/icon/w1_05.png", new BMap.Size(26, 26)); //点击后的新图标
            marker.setIcon(myIcon2);
            marker.setTop(true, 27000000); //标注遮挡问题
            map.addOverlay(marker);
            map.centerAndZoom(pt, 19); //防止跳回聚合
            var contents =
                '<div class="app-map-infowindow zddw-infowindow" style="height:240px;background-image: url(img/icon/back15.png);min-height: 164px;background-position: right;background-repeat: no-repeat;">' +
                '<h3 class="title" style=" margin: 0;padding: 0 12px;height: 32px;line-height: 32px;font-size: 16px;color: #666;border-bottom: 1px solid #ccc; white-space:nowrap; overflow:hidden;text-overflow:ellipsis;" v-text = "zddws[i].gisX">' +
                data.compPlanInfo.dxmc +
                '</h3>' +
                '<div class="summary" style="font-size:14px; height: 32px;line-height: 32px;color: #999;">' +
                data.compZddwInfo.dwdz +
                '</div>' +
                '<table cellpadding="0" cellspacing="0" class="content" style="height:150px; width:440px;white-space: normal;">' +
                '<tr>' +
                '<td style="padding: 1px;font-size: 14px;" colspan="2">' + '<strong>消防管理人：</strong>' +  (data.compZddwInfo.xfglr != "" ? data.compZddwInfo.xfglr : "姓名：无") + " / " + (data.compZddwInfo.xfglrdh != "" ? data.compZddwInfo.xfglrdh : "电话：无") + '</td>' +
                '</tr>' +
                '<tr>' +
                '<td style="padding: 1px;font-size: 14px;" colspan="2">' + '<strong>单位值班电话：</strong>' + data.compZddwInfo.zbdh + '</td>' +
                '</tr>' +
                '<tr>' +
                '<td style="padding: 1px;font-size: 14px;" colspan="2">' + '<strong>预案级别：</strong>' + data.compPlanInfo.yajbmc + '</td>' +
                '</tr>' +
                '<tr>' +
                '<td style="padding: 1px;font-size: 14px;" colspan="2">' + '<strong>防火级别：</strong>' + data.compZddwInfo.fhdjmc + '</td>' +
                '</tr>' +
                '</table>' +
                '<div  class="bbar" style="text-align: center; position: absolute; bottom:0;width: 100%;height: 25px;text-align: center;">' +
                '<b class="btn" onclick="openleft()" disabled="true" style="padding:0 7px;background:#5963A0;font-size:11px;color: #fff;display: inline-block;margin: 0 2px;height: 24px;line-height: 24px;border-radius: 2px;cursor: pointer;text-align: center;text-decoration: none;"><img style="margin-right:5px;margin-bottom:1px;width: 12px;height: 12px;vertical-align: sub;" src="img/icon/icon_info.png">基本信息</b>' +
                '<b class="btn" onclick="opents()" disabled="true" style="padding:0 7px;background:#5963A0;font-size:11px;color: #fff;display: inline-block;margin: 0 2px;height: 24px;line-height: 24px;border-radius: 2px;cursor: pointer;text-align: center;text-decoration: none;"><img style="margin-right:5px;margin-bottom:1px;width: 12px;height: 12px;vertical-align: sub;" src="img/icon/icon_key_diagram.png">关键图示</b>' +
                '</div>' +
                '<div class="x-clear"></div>' +
                '</div>';
            var infoWindow = new BMap.InfoWindow(contents); //创建信息窗口对象
            map.openInfoWindow(infoWindow, pt);
        });
        var opts = {
            position: pt, // 指定文本标注所在的地理位置
            offset: new BMap.Size(-5, 30) //设置文本偏移量
        }
        var label = new BMap.Label(formatLabel(data.compPlanInfo.dxmc), opts);
        label.setStyle({
            opacity: '0.7',
            fontSize: '12px',
            border: '0',
            textAlign: 'center',
            color: '#fff',
            borderRadius: '2px',
            paddingRight: '60px',
            paddingTop: '1px',
            paddingLeft: '3px',
            Width: '5px',
            background: '#356FAE',
            display: 'inline-block',
            paddingRight: '3px',
            marginLeft: '-10px',
            padding: '3px',
        });
        marker.setLabel(label);
        function formatLabel(strname) {
            var len = strname.length;
            var subInder = 4;
            if (strname.indexOf(":") > 0 && len < 12) {
                subInder = strname.indexOf(":") + 1;
            }
            if (len <= subInder) {
                return strname;
            }
            var result = "";
            var cnt = parseInt(len / subInder);
            var index = 0;
            for (var i = 0; i < cnt; i++) {
                index = i * subInder;
                result += strname.slice(index, index + subInder) + "<br/>";
            }
            if (len % subInder) {
                result += strname.slice(index + subInder, len);
            }
            var div = '<div style="font-weight: bold;text-align:center;red">' + result + '</div>';
            return div;
        };
        //根据参数部分和参数名来获取参数值
        function GetQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if(r != null) return unescape(r[2]);
            return null;
        };
        //delta
        function delta(lng, lat) {
            var a = 6378245.0; //  a: 卫星椭球坐标投影到平面地图坐标系的投影因子。
            var ee = 0.00669342162296594323; //  ee: 椭球的偏心率。
            var dLng = transformLng(lng - 105.0, lat - 35.0);
            var dLat = transformLat(lng - 105.0, lat - 35.0);
            var radLat = lat / 180.0 * this.PI;
            var magic = Math.sin(radLat);
            magic = 1 - ee * magic * magic;
            var sqrtMagic = Math.sqrt(magic);
            dLng = (dLng * 180.0) / (a / sqrtMagic * Math.cos(radLat) * this.PI);
            dLat = (dLat * 180.0) / ((a * (1 - ee)) / (magic * sqrtMagic) * this.PI);
            return {
                'lng': dLng,
                'lat': dLat,
            };

        };
        //WGS-84 TO BD-09
        function wgs84_bd09(wgs) {

            var gcj = gcj_encrypt(wgs.lng, wgs.lat);

            var bd09 = bd_encrypt(gcj.lng, gcj.lat);
            return bd09;

        };
        //WGS-84 to GCJ-02 首次加密
        function gcj_encrypt(wgsLng, wgsLat) {

            if(outOfChina(wgsLng, wgsLat))
                return {
                    'lng': wgsLng,
                    'lat': wgsLat
                };

            var d = delta(wgsLng, wgsLat);
            return {
                'lng': wgsLng + d.lng,
                'lat': wgsLat + d.lat
            };

        };
        //GCJ-02 to BD-09 二次加密
        function bd_encrypt(gcjLng, gcjLat) {

            var x = gcjLng,
                y = gcjLat;
            var z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * this.x_pi);
            var theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * this.x_pi);
            bdLng = z * Math.cos(theta) + 0.0065;
            bdLat = z * Math.sin(theta) + 0.006;
            return {
                'lng': bdLng,
                'lat': bdLat,

            };
        };

        function outOfChina(lng, lat) {

            if(lng < 72.004 || lng > 137.8347)
                return true;
            if(lat < 0.8293 || lat > 55.8271)
                return true;
            return false;
        };

        function transformLat(x, y) {
            var ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(Math.abs(x));
            ret += (20.0 * Math.sin(6.0 * x * this.PI) + 20.0 * Math.sin(2.0 * x * this.PI)) * 2.0 / 3.0;
            ret += (20.0 * Math.sin(y * this.PI) + 40.0 * Math.sin(y / 3.0 * this.PI)) * 2.0 / 3.0;
            ret += (160.0 * Math.sin(y / 12.0 * this.PI) + 320 * Math.sin(y * this.PI / 30.0)) * 2.0 / 3.0;
            return ret;
        };

        function transformLng(x, y) {
            var ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(Math.abs(x));
            ret += (20.0 * Math.sin(6.0 * x * this.PI) + 20.0 * Math.sin(2.0 * x * this.PI)) * 2.0 / 3.0;
            ret += (20.0 * Math.sin(x * this.PI) + 40.0 * Math.sin(x / 3.0 * this.PI)) * 2.0 / 3.0;
            ret += (150.0 * Math.sin(x / 12.0 * this.PI) + 300.0 * Math.sin(x / 30.0 * this.PI)) * 2.0 / 3.0;
            return ret;
        };

    })
</script>

</html>